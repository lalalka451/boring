<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Idle Demo – 60-line version</title>
  <style>
    body {
      font-family: sans-serif;
      max-width: 380px;
      margin: 40px auto;
      text-align: center
    }

    button {
      margin: 4px 2px;
      padding: 6px 12px;
      font-size: 14px
    }

    #log {
      height: 80px;
      overflow: auto;
      border: 1px solid #ccc;
      margin-top: 10px;
      font-size: 13px
    }
  </style>
</head>

<body>

  <h2>Resources</h2>
  <div id="wood">Wood: 0</div>

  <h2>Manual Gathering</h2>
  <button id="clickWood">Click for Wood (+1)</button>

  <h2>Buildings</h2>
  <button id="buySawmill">Buy Sawmill – 10 wood</button>

  <div id="log"></div>

  <script>
    /* ---------- core state ---------- */
    const res = { wood: 0 };
    const bld = {
      sawmill: { count: 0, rate: 0.5, cost: { wood: 10 } }
    };

    /* ---------- helpers ---------- */
    function canAfford(cost) {
      return Object.keys(cost).every(k => res[k] >= cost[k]);
    }
    function spend(cost) {
      for (const k in cost) res[k] -= cost[k];
    }
    function log(msg) {
      const div = document.getElementById('log');
      div.innerHTML = msg + '<br>' + div.innerHTML;
    }
    function updateUI() {
      wood.textContent = `Wood: ${res.wood.toFixed(1)}`;
    }

    /* ---------- manual gathering buttons ---------- */
    clickWood.onclick = () => {
      res.wood += 1;
      log('Gathered 1 Wood');
      updateUI();
    };

    /* ---------- buy buttons ---------- */
    buySawmill.onclick = () => {
      const { cost } = bld.sawmill;
      if (!canAfford(cost)) return log('Need more wood!');
      spend(cost); bld.sawmill.count++; log('Bought 1 Sawmill');
    };

    /* ---------- main loop (1 Hz) ---------- */
    setInterval(() => {
      res.wood += bld.sawmill.count * bld.sawmill.rate;
      updateUI();
    }, 1000);

    updateUI();   // first paint
  </script>
</body>

</html>